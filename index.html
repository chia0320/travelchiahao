<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>CHIA X HAOä¹å·ä¹‹æ—… - äº’å‹•å¼ (V7.0 è²»ç”¨åŠŸèƒ½å„ªåŒ–)</title>
    <style>
        /* æ–‡é’é…è‰²èˆ‡æ’ç‰ˆ */
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #fcfbf7; /* æŸ”å’Œç±³ç™½èƒŒæ™¯ */
            margin: 0;
            padding: 20px;
        }
        .header {
            text-align: center;
            padding: 15px 0;
            background-color: #7f8c8d; /* æº«æš–ä¸­ç°æ¨™é¡Œ */
            color: white;
            border-radius: 10px 10px 0 0;
            margin: -20px -20px 20px -20px;
        }
        .header h1 { margin: 0; font-size: 1.5em; }

        /* æ—¥æœŸå°èˆªå¡ç‰‡å®¹å™¨ */
        .day-nav {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            margin-bottom: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            overflow-x: auto;
        }
        .day-tab {
            text-align: center;
            padding: 8px 10px;
            margin: 0 5px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
            font-weight: bold;
            color: #7f8c8d;
            flex-shrink: 0;
        }
        .day-tab.active {
            background-color: #bca47c; /* æŸ”å’ŒåœŸé»ƒ/ç±³è‰² - é¸ä¸­ */
            color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        /* è¡Œç¨‹å…§å®¹å®¹å™¨ */
        .itinerary-container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.05);
        }
        .itinerary-day { display: none; }
        .itinerary-day.active { display: block; }

        /* å¤©æ°£é¡¯ç¤ºå€å¡Šæ¨£å¼ */
        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-left: 5px solid #bca47c;
            padding-left: 10px;
        }
        .day-title {
            font-size: 1.4em;
            font-weight: 600;
            color: #5c5c5c;
            margin: 0;
        }
        .weather-box {
            font-size: 0.9em;
            color: #7f8c8d;
            text-align: right;
            line-height: 1.2;
            min-width: 100px;
            flex-shrink: 0;
        }
        .weather-temp {
            font-size: 1.2em;
            font-weight: bold;
            color: #bca47c;
        }
        .weather-icon {
            vertical-align: middle;
            margin-right: 5px;
        }
        
        /* è¡Œç¨‹å¡ç‰‡ */
        .activity-card {
            display: flex;
            align-items: flex-start;
            margin-bottom: 25px;
            padding: 15px;
            background-color: #f7f5f0; /* å¡ç‰‡æ·¡ç±³è‰²èƒŒæ™¯ */
            border-radius: 8px;
            border-left: 5px solid #7f8c8d;
            box-shadow: 0 1px 3px rgba(0,0,0,0.03);
        }
        .time-box {
            font-size: 1.1em;
            font-weight: bold;
            color: #5c5c5c;
            margin-right: 15px;
            flex-shrink: 0;
            padding-top: 5px;
        }
        .details { flex-grow: 1; }
        
        /* å¯ç·¨è¼¯å€åŸŸçš„æ¨£å¼ */
        .editable {
            cursor: pointer;
            padding: 1px 4px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        .editable:hover {
            background-color: #e0e0e0; /* æ»‘é¼ ç§»å…¥æ™‚é¡¯ç¤ºæ·ºç°èƒŒæ™¯ */
        }
        .editable-input {
            width: 95%;
            padding: 5px;
            margin-top: 2px;
            margin-bottom: 2px;
            border: 1px solid #bca47c;
            border-radius: 4px;
            font-size: 1em;
            box-sizing: border-box;
        }

        .location {
            font-weight: bold;
            color: #5c5c5c;
            font-size: 1em;
            margin-bottom: 5px;
        }
        
        .description-text {
            font-size: 0.9em;
            color: #6a6a6a;
            margin-top: 5px;
            padding-top: 5px;
            border-top: 1px solid #eee;
        }

        .note { font-size: 0.8em; color: #888; margin-top: 5px; }
        .highlight { border-left: 5px solid #bca47c; }
        
        /* åœ°åœ–é€£çµæ¨£å¼ - ç¢ºä¿é€£çµä¸æœƒè¢«ç·¨è¼¯åŠŸèƒ½å½±éŸ¿ */
        .location a {
            color: #5c5c5c;
            text-decoration: none;
            border-bottom: 1px dashed #bca47c;
            cursor: pointer;
        }

        /* è²»ç”¨ç´€éŒ„è¡¨æ ¼æ¨£å¼ */
        #expense-table td {
            padding: 8px;
            border: 1px solid #ddd;
            vertical-align: middle;
        }
        #expense-table tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .expense-editable {
            cursor: pointer;
            min-height: 20px;
        }
        /* è®“ä¸‹æ‹‰é¸å–®åœ¨è¡¨æ ¼å…§å°é½Š */
        .category-select {
            width: 100%;
            padding: 5px;
            border: 1px solid #bca47c;
            border-radius: 4px;
            font-size: 1em;
            box-sizing: border-box;
        }
        .delete-btn {
            background: none;
            border: none;
            color: red;
            cursor: pointer;
            font-weight: bold;
            padding: 0;
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        .delete-btn:hover {
            opacity: 1;
        }
        .currency-control {
            margin-bottom: 15px;
            font-weight: bold;
            color: #5c5c5c;
        }
        .currency-select {
            padding: 8px;
            border: 1px solid #bca47c;
            border-radius: 4px;
            background-color: white;
            margin-left: 10px;
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>CHIA X HAO ğŸ‡¯ğŸ‡µ ä¹å·ä¹‹æ—…</h1>
    </div>

    <div class="day-nav">
        <div class="day-tab active" data-day="D1" data-city="Fukuoka, JP">D1 <br> 1/1</div>
        <div class="day-tab" data-day="D2" data-city="Beppu, JP">D2 <br> 1/2</div>
        <div class="day-tab" data-day="D3" data-city="Aso, JP">D3 <br> 1/3</div>
        <div class="day-tab" data-day="D4" data-city="Takachiho, JP">D4 <br> 1/4</div>
        <div class="day-tab" data-day="D5" data-city="Fukuoka, JP">D5 <br> 1/5</div>
        <div class="day-tab" data-day="D6" data-city="Fukuoka, JP">D6 <br> 1/6</div>
        <div class="day-tab" data-day="D7">ğŸ’¸ <br> èŠ±è²»</div>
    </div>

    <div class="itinerary-container">
        
        <div class="itinerary-day active" id="D1">
            <div class="day-header">
                <div class="day-title">1 æœˆ 1 æ—¥ (ä¸€) - ç¦å²¡å¸‚å€</div>
                <div class="weather-box" id="weather-D1"></div>
            </div>
            <div class="activity-card" data-id="D1A1">
                <div class="time-box editable" data-field="time">11:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">âœˆï¸ æŠµé” <a href="https://maps.app.goo.gl/" target="_blank">ç¦å²¡æ©Ÿå ´</a></div>
                    <div class="description-text editable" data-field="desc">ä¹å·çš„ç©ºä¸­é–€æˆ¶ï¼Œåœ°éµå¯ç›´é”å¸‚å€ï¼Œå±•é–‹æ—…ç¨‹çš„ç¬¬ä¸€ç«™ã€‚</div>
                    <div class="note editable" data-field="note">è¾¦ç†å…¥å¢ƒæ‰‹çºŒã€‚</div>
                </div>
            </div>
            <div class="activity-card highlight" data-id="D1A2">
                <div class="time-box editable" data-field="time">11:30</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸš— ç§Ÿè»Šæ‰‹çºŒï¼ˆæ©Ÿå ´å–è»Šï¼‰</div>
                    <div class="description-text editable" data-field="desc">åœ¨æ©Ÿå ´ç§Ÿè»Šé»è¾¦ç†æ‰‹çºŒï¼Œæº–å‚™å±•é–‹è‡ªé§•ä¹‹æ—…ã€‚</div>
                    <div class="note editable" data-field="note">åœ°é»ï¼š<a href="https://www.google.com/search?q=https://maps.app.goo.gl/" target="_blank">ä¸‰è±ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼/ãƒ¦ãƒŠã‚¤ãƒ†ãƒƒãƒ‰ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼ç¦å²¡ç©ºæ¸¯åº—</a> (A3å‡ºå£ 14è™Ÿå…¬è»Šç‰Œ)</div>
                </div>
            </div>
            <div class="activity-card" data-id="D1A3">
                <div class="time-box editable" data-field="time">12:30</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ›ï¸ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/yC78j2Bf6wXm2t3n6" target="_blank">LaLaport ç¦å²¡</a></div>
                    <div class="description-text editable" data-field="desc">æ–°èˆˆçš„å¤§å‹è¤‡åˆå•†å ´ï¼Œæˆ¶å¤–æœ‰ç­‰æ¯” RX-93ff Î½é‹¼å½ˆç«‹åƒï¼Œæ˜¯è³¼ç‰©èˆ‡æ‹ç…§çš„å¥½å»è™•ã€‚</div>
                    <div class="note editable" data-field="note">åƒè§€å•†å ´èˆ‡ç­‰æ¯”é‹¼å½ˆã€‚</div>
                </div>
            </div>
            <div class="activity-card" data-id="D1A4">
                <div class="time-box editable" data-field="time">16:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">â›²ï¸ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/7g3gV9qT8wY2T8E57" target="_blank">åšå¤šé‹æ²³åŸ</a></div>
                    <div class="description-text editable" data-field="desc">çµåˆè³¼ç‰©ã€ç¾é£Ÿã€å¨›æ¨‚çš„å•†æ¥­è¨­æ–½ï¼Œå¸¸æœ‰ç²¾å½©çš„æ°´èˆç§€è¡¨æ¼”ã€‚</div>
                    <div class="note editable" data-field="note">æ™šé¤èˆ‡è³¼ç‰©ã€‚</div>
                </div>
            </div>
            <div class="activity-card highlight" data-id="D1A5">
                <div class="time-box editable" data-field="time">ä½</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ¨ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/3QWfT58iRkF3DkY26" target="_blank">S-Peria Hotel Hakata</a></div>
                    <div class="description-text editable" data-field="desc">åœ°é»ä½æ–¼åšå¤šï¼Œæ–¹ä¾¿éš”æ—¥å‡ºç™¼ã€‚</div>
                    <div class="note editable" data-field="note">å«æ—©é¤ã€‚</div>
                </div>
            </div>
        </div>
        
        <div class="itinerary-day" id="D2">
            <div class="day-header">
                <div class="day-title">1 æœˆ 2 æ—¥ (äºŒ) - åˆ¥åºœ & ç”±å¸ƒé™¢</div>
                <div class="weather-box" id="weather-D2"></div>
            </div>
            <div class="activity-card" data-id="D2A1">
                <div class="time-box editable" data-field="time">11:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ¦ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/qj7mXg93r9V1F7Wf6" target="_blank">ä¹å·é‡ç”Ÿå‹•ç‰©åœ’</a></div>
                    <div class="description-text editable" data-field="desc">å¯ä»¥åœ¨åœ’å…§æ­ä¹˜å°ˆç”¨å·´å£«æˆ–è‡ªé§•ï¼Œè¿‘è·é›¢è§€å¯ŸçŒ›ç¸å’Œå‹•ç‰©ã€‚</div>
                    <div class="note editable" data-field="note">å¾ç¦å²¡é–‹è»Šå‰å¾€ã€‚</div>
                </div>
            </div>
            <div class="activity-card" data-id="D2A2">
                <div class="time-box editable" data-field="time">13:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">â™¨ï¸ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/h6J2mQJ1z1K3z2Mv9" target="_blank">åˆ¥åºœåœ°ç„è°·</a> & ç‹­éœ§å°ä¸Šå±•æœ›æ‰€</div>
                    <div class="description-text editable" data-field="desc">åˆ¥åºœçš„è‘—åæº«æ³‰å€ï¼Œä»¥å™´ç™¼å„ç¨®å¥‡ç•°é¡è‰²å’Œå½¢ç‹€çš„æº«æ³‰è€Œèåï¼Œä¸¦åœ¨å±•æœ›å°çœºæœ›æ™¯è‰²ã€‚</div>
                    <div class="note editable" data-field="note">æµ·åœ°ç„ç­‰è§€å…‰ã€‚</div>
                </div>
            </div>
            <div class="activity-card" data-id="D2A3">
                <div class="time-box editable" data-field="time">15:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ›ï¸ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/z8p7E6c9D2tQkF278" target="_blank">ç”±å¸ƒé™¢æ•£ç­–</a></div>
                    <div class="description-text editable" data-field="desc">æ¹¯ä¹‹åªè¡—é“é€›è¡—ï¼Œäº«å—ç‰¹è‰²å°åº—èˆ‡ä¸‹åˆèŒ¶æ°›åœã€‚</div>
                    <div class="note editable" data-field="note"></div>
                </div>
            </div>
            <div class="activity-card" data-id="D2A4">
                <div class="time-box editable" data-field="time">16:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ¡ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/P8Z8S7Q2wD9D8uMv7" target="_blank">æ¹¯å¸ƒé™¢ç«¥è©±æ‘ (Yufuin Floral Village)</a></div>
                    <div class="description-text editable" data-field="desc">å……æ»¿æ­æ´²ç«¥è©±æ°›åœçš„ç‰¹è‰²å°é®ï¼Œé©åˆæ‹ç…§ç•™å¿µã€‚</div>
                    <div class="note editable" data-field="note"></div>
                </div>
            </div>
            <div class="activity-card highlight" data-id="D2A5">
                <div class="time-box editable" data-field="time">ä½</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ  <a href="https://www.google.com/search?q=https://maps.app.goo.gl/tWp7F6e9G7xR4wGq9" target="_blank">èŠ±ä¹‹æ¹¯æ—…é¤¨ Oyado Hananoyu</a></div>
                    <div class="description-text editable" data-field="desc">äº«å—æ—¥å¼æº«æ³‰æ—…é¤¨ã€‚</div>
                    <div class="note editable" data-field="note">âš ï¸ **6é»å‰è¦Check in**ã€‚</div>
                </div>
            </div>
        </div>

        <div class="itinerary-day" id="D3">
            <div class="day-header">
                <div class="day-title">1 æœˆ 3 æ—¥ (ä¸‰) - é˜¿è˜‡å±±å€</div>
                <div class="weather-box" id="weather-D3"></div>
            </div>
            <div class="activity-card" data-id="D3A1">
                <div class="time-box editable" data-field="time">11:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">â›©ï¸ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/j4YpL3h6D5kG8pW68" target="_blank">ä¸Šè‰²è¦‹ç†Šé‡åº§ç¥ç¤¾</a></div>
                    <div class="description-text editable" data-field="desc">éš±è—åœ¨æ·±å±±ä¸­çš„ç¥ç§˜ç¥ç¤¾ï¼Œåƒé“ä¸Šçš„è‹”è˜šç‡ˆç± æ¥µå…·éˆæ°£èˆ‡ç¥ç§˜æ°›åœã€‚</div>
                    <div class="note editable" data-field="note">å¾ç”±å¸ƒé™¢é–‹è»Šå‰å¾€ã€‚</div>
                </div>
            </div>
            <div class="activity-card" data-id="D3A2">
                <div class="time-box editable" data-field="time">12:30</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸŒ‹ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/D2L5kH8pY7wM4wRj8" target="_blank">é˜¿è˜‡ä¸­å²³ç«å±±å£</a></div>
                    <div class="description-text editable" data-field="desc">æ´»ç«å±±çš„ä¸­å¿ƒåœ°å¸¶ï¼Œèƒ½è¦ªçœ¼çœ‹åˆ°å™´ç™¼æ°£é«”çš„ç«å±±å£ï¼Œæ„Ÿå—å¤§è‡ªç„¶çš„é­„åŠ›ã€‚</div>
                    <div class="note editable" data-field="note">è¦–ç«å±±æ°£é«”ç‹€æ³æ±ºå®šæ˜¯å¦èƒ½é è¿‘ã€‚</div>
                </div>
            </div>
            <div class="activity-card" data-id="D3A3">
                <div class="time-box editable" data-field="time">14:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ´ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/h4J5h7D2wE8g7aK39" target="_blank">è‰åƒé‡Œä¹‹æ¿±</a></div>
                    <div class="description-text editable" data-field="desc">é˜¿è˜‡å±±å£¯é—Šçš„ç«å±±å£è‰åŸï¼Œæ™¯è‰²é–‹é—Šï¼Œæ˜¯æ¬£è³é˜¿è˜‡äº”å¶½ç¾æ™¯çš„æœ€ä½³åœ°é».</div>
                    <div class="note editable" data-field="note">å»£é—Šçš„è‰åŸæ™¯è§€ã€‚</div>
                </div>
            </div>
            <div class="activity-card" data-id="D3A4">
                <div class="time-box editable" data-field="time">16:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ›’ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/wS7K2dD6fG3h8A8m9" target="_blank">Ebisupana Aso æ¡è³¼æ™šé¤</a></div>
                    <div class="description-text editable" data-field="desc">ç•¶åœ°çš„è¶…å¸‚ï¼Œé©åˆæ¡è³¼é£Ÿæå’Œç”Ÿæ´»ç”¨å“ï¼Œæº–å‚™æ™šä¸Šåœ¨åˆ¥å¢…çƒ¹é£ªã€‚</div>
                    <div class="note editable" data-field="note"></div>
                </div>
            </div>
            <div class="activity-card highlight" data-id="D3A5">
                <div class="time-box editable" data-field="time">ä½</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ  <a href="https://www.google.com/search?q=https://maps.app.goo.gl/E4L5kH8pY7wM4wRj8" target="_blank">è—¤ã®ãƒ´ã‚£ãƒ© Fujino Villa</a></div>
                    <div class="description-text editable" data-field="desc">é˜¿è˜‡å±±å€çš„ç‰¹è‰²åˆ¥å¢…ï¼Œå¯è‡ªè¡Œçƒ¹ç…®æ™šé¤ã€‚</div>
                    <div class="note editable" data-field="note">å…¥ä½å¯†ç¢¼ï¼š**0325**</div>
                </div>
            </div>
        </div>
        
        <div class="itinerary-day" id="D4">
            <div class="day-header">
                <div class="day-title">1 æœˆ 4 æ—¥ (å››) - é«˜åƒç©—</div>
                <div class="weather-box" id="weather-D4"></div>
            </div>
            <div class="activity-card" data-id="D4A1">
                <div class="time-box editable" data-field="time">10:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸš <a href="https://www.google.com/search?q=https://maps.app.goo.gl/Q6R2fF4g7H9j6K5m7" target="_blank">é˜¿è˜‡å±±ãƒ˜ãƒªã‚³ãƒ—ã‚¿ãƒ¼éŠè¦§é£›è¡Œ</a></div>
                    <div class="description-text editable" data-field="desc">å¾ç©ºä¸­ä¿¯ç°é˜¿è˜‡ç«å±±å£ã€è‰åƒé‡Œä¹‹æ¿±çš„å£¯éº—æ™¯è§€ï¼Œè¦–å¤©æ°£ç‹€æ³è€Œå®šã€‚</div>
                    <div class="note editable" data-field="note">ç›´å‡æ©Ÿè§€å…‰é£›è¡Œã€‚</div>
                </div>
            </div>
            <div class="activity-card" data-id="D4A2">
                <div class="time-box editable" data-field="time">14:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸš‚ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/E2Y7tV5tS8hA7wF57" target="_blank">é«˜åƒç©—å°ç«è»Š</a></div>
                    <div class="description-text editable" data-field="desc">æ²¿è‘—å»¢æ£„éµé“è¡Œé§›ï¼Œç©¿æ¢­æ–¼å³½è°·ä¹‹é–“çš„è§€å…‰å°ç«è»Šï¼Œæ˜¯ç¨ç‰¹çš„é«”é©—ã€‚</div>
                    <div class="note editable" data-field="note">é«”é©—å»¢æ£„éµé“æ”¹å»ºçš„è§€å…‰å°ç«è»Šã€‚</div>
                </div>
            </div>
            <div class="activity-card" data-id="D4A3">
                <div class="time-box editable" data-field="time">15:30</div>
                <div class="details">
                    <div class="location editable" data-field="location">â›©ï¸ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/h7J8kL2pW5tY6uV48" target="_blank">å¤©å®‰æ²³åŸ</a></div>
                    <div class="description-text editable" data-field="desc">å‚³èªªä¸­ç¥æ˜èšé›†è­°äº‹ä¹‹åœ°ï¼Œå……æ»¿éˆæ°£ï¼Œæ²³åºŠä¸Šå †æ»¿äº†ä¿¡å¾’ç¥ˆé¡˜çš„çŸ³å¡”ã€‚</div>
                    <div class="note editable" data-field="note">å‚³èªªä¸­çš„ç¥è©±ä¹‹åœ°ã€‚</div>
                </div>
            </div>
            <div class="activity-card highlight" data-id="D4A4">
                <div class="time-box editable" data-field="time">ä½</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ¨ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/z9p7E6c9D2tQkF278" target="_blank">Hotel Takachiho</a></div>
                    <div class="description-text editable" data-field="desc">ä½æ–¼é«˜åƒç©—åœ°å€ï¼Œæ–¹ä¾¿éš”å¤©æ¸…æ—©å‰å¾€åˆ’èˆ¹ã€‚</div>
                    <div class="note editable" data-field="note">å«æ—©é¤ã€‚</div>
                </div>
            </div>
        </div>

        <div class="itinerary-day" id="D5">
            <div class="day-header">
                <div class="day-title">1 æœˆ 5 æ—¥ (äº”) - è¿”ç¨‹ç¦å²¡</div>
                <div class="weather-box" id="weather-D5"></div>
            </div>
            <div class="activity-card highlight" data-id="D5A1">
                <div class="time-box editable" data-field="time">08:30</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ½ï¸ äº«ç”¨æ—©é¤</div>
                    <div class="description-text editable" data-field="desc">åœ¨é£¯åº—äº«ç”¨è±ç››çš„æ—©é¤å¾Œï¼Œæº–å‚™å‰å¾€å³½è°·åˆ’èˆ¹ã€‚</div>
                    <div class="note editable" data-field="note">8:30 å‰è¦åƒå®Œæ—©é¤ã€‚</div>
                </div>
            </div>
            <div class="activity-card" data-id="D5A2">
                <div class="time-box editable" data-field="time">10:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ›¶ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/D4L5kH8pY7wM4wRj8" target="_blank">é«˜åƒç©—åˆ’èˆ¹</a></div>
                    <div class="description-text editable" data-field="desc">åœ¨é«˜åƒç©—å³½è°·çš„ç€‘å¸ƒä¸‹åˆ’èˆ¹ï¼Œæ˜¯é«”é©—å³½è°·ç¾æ™¯çš„æœ€ä½³æ–¹å¼ï¼ˆéœ€æå‰é ç´„æˆ–æ’éšŠï¼‰ã€‚</div>
                    <div class="note editable" data-field="note">é«˜åƒç©—å³½è°·åˆ’èˆ¹é«”é©— (è¦–å¤©æ°£ç‹€æ³)ã€‚</div>
                </div>
            </div>
            <div class="activity-card highlight" data-id="D5A3">
                <div class="time-box editable" data-field="time">13:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸš— é–‹è»Šè¿”å›ç¦å²¡å¸‚å€ & é‚„è»Š</div>
                    <div class="description-text editable" data-field="desc">å¾é«˜åƒç©—é–‹è»Šè¿”å›ç¦å²¡å¸‚å€ (ç´„ 3.5-4 å°æ™‚)ï¼Œä¸¦åœ¨æ©Ÿå ´é™„è¿‘é‚„è»Šã€‚</div>
                    <div class="note editable" data-field="note">ç§Ÿè»Šé‚„è»Šæ‰‹çºŒã€‚</div>
                </div>
            </div>
            <div class="activity-card" data-id="D5A4">
                <div class="time-box editable" data-field="time">17:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">â›©ï¸ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/K6T8uW5tS8hA7wF57" target="_blank">å¤ªå®°åºœå¤©æ»¿å®®</a></div>
                    <div class="description-text editable" data-field="desc">ä¹å·æœ€é‡è¦çš„ç¥ç¤¾ä¹‹ä¸€ï¼Œä¾›å¥‰å­¸å•ä¹‹ç¥ï¼Œåƒé“ä¸Šçš„æ¢…æé¤…æ˜¯å¿…åšç¾é£Ÿã€‚</div>
                    <div class="note editable" data-field="note">é–‹è»Šå›åˆ°ç¦å²¡å¸‚å€å¾Œï¼Œå¯å…ˆå‰å¾€å¤ªå®°åºœã€‚</div>
                </div>
            </div>
            <div class="activity-card" data-id="D5A5">
                <div class="time-box editable" data-field="time">18:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ›ï¸ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/P2R5kH8pY7wM4wRj8" target="_blank">å¤©ç¥LOFT</a></div>
                    <div class="description-text editable" data-field="desc">åœ¨å¤©ç¥åœ°å€çš„LOFTè³¼ç‰©ï¼Œæ¡è³¼ç‰¹è‰²æ–‡å…·ã€é›œè²¨ã€‚</div>
                    <div class="note editable" data-field="note">å¯é †é“åœ¨é™„è¿‘è²·æ˜å¤ªå­éºµåŒ…ã€‚</div>
                </div>
            </div>
             <div class="activity-card" data-id="D5A6">
                <div class="time-box editable" data-field="time">18:40</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ è²·æ˜å¤ªå­éºµåŒ…</div>
                    <div class="description-text editable" data-field="desc">åœ¨å¤©ç¥LOFTé™„è¿‘æˆ–å¤©ç¥åœ°ä¸‹è¡—å°‹æ‰¾ç¦å²¡ç‰¹è‰²æ˜å¤ªå­éºµåŒ… (ä¾‹å¦‚ï¼š**Pain Stock** æˆ–è»Šç«™åº—)ã€‚</div>
                    <div class="note editable" data-field="note"></div>
                </div>
            </div>
            <div class="activity-card" data-id="D5A7">
                <div class="time-box editable" data-field="time">19:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ¥© <a href="https://www.google.com/search?q=https://maps.app.goo.gl/T4Y7tV5tS8hA7wF57" target="_blank">ç‡’è‚‰ Nikuichi (Yakuin Store)</a></div>
                    <div class="description-text editable" data-field="desc">äº«ç”¨å·²é è¨‚çš„ç¾å‘³ç‡’è‚‰ã€‚</div>
                    <div class="note editable" data-field="note">å·²è¨‚ä½ã€‚</div>
                </div>
            </div>
            <div class="activity-card highlight" data-id="D5A8">
                <div class="time-box editable" data-field="time">ä½</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ¨ <a href="https://www.google.com/search?q=https://maps.app.goo.gl/A6J8kL2pW5tY6uV48" target="_blank">Quintessa Hotel Fukuoka Tenjin Minami</a></div>
                    <div class="description-text editable" data-field="desc">å›åˆ°ç¦å²¡å¸‚å€çš„ä½å®¿é»ï¼Œæ–¹ä¾¿éš”å¤©å‰å¾€æ©Ÿå ´ã€‚</div>
                    <div class="note editable" data-field="note">ç¦å²¡å¸‚å€ä½å®¿ã€‚</div>
                </div>
            </div>
        </div>

        <div class="itinerary-day" id="D6">
            <div class="day-header">
                <div class="day-title">1 æœˆ 6 æ—¥ (å…­) - è¿”ç¨‹</div>
                <div class="weather-box" id="weather-D6"></div>
            </div>
            <div class="activity-card" data-id="D6A1">
                <div class="time-box editable" data-field="time">ä¸Šåˆ</div>
                <div class="details">
                    <div class="location editable" data-field="location">âœˆï¸ å‰å¾€æ©Ÿå ´</div>
                    <div class="description-text editable" data-field="desc">å¾ Quintessa Hotel æ­ä¹˜åœ°éµæˆ–è¨ˆç¨‹è»Šå‰å¾€ç¦å²¡æ©Ÿå ´ã€‚</div>
                    <div class="note editable" data-field="note"></div>
                </div>
            </div>
            <div class="activity-card highlight" data-id="D6A2">
                <div class="time-box editable" data-field="time">12:00</div>
                <div class="details">
                    <div class="location editable" data-field="location">ğŸ›« ç™»æ©Ÿ</div>
                    <div class="description-text editable" data-field="desc">æ­ä¹˜é£›æ©Ÿè¿”å›ã€‚</div>
                    <div class="note editable" data-field="note"></div>
                </div>
            </div>
        </div>

        <div class="itinerary-day" id="D7">
            <div class="day-header">
                <div class="day-title">ğŸ’¸ æ—…è²»ç´€éŒ„ç¸½è¦½</div>
                <div class="weather-box"></div>
            </div>

            <div class="currency-control">
                ç¸½è¨ˆå¹£åˆ¥ï¼š
                <select id="currency-select" class="currency-select" onchange="updateTotal()">
                    <option value="JPY">æ—¥å¹£ (Â¥)</option>
                    <option value="TWD">å°å¹£ (NTD)</option>
                </select>
                <span style="font-size: 0.8em; color: #a0a0a0;"> (å–®ç­†é‡‘é¡è«‹çµ±ä¸€è¼¸å…¥æ—¥å¹£)</span>
            </div>

            <table id="expense-table" style="width:100%; border-collapse: collapse;">
                <thead>
                    <tr style="background-color: #7f8c8d; color: white;">
                        <td style="width:25%;">é¡åˆ¥</td>
                        <td style="width:45%;">é …ç›®èªªæ˜</td>
                        <td style="width:20%; text-align: right;">æ—¥å¹£ (Â¥)</td>
                        <td style="width:10%;">æ“ä½œ</td>
                    </tr>
                </thead>
                <tbody>
                     </tbody>
                <tfoot>
                    <tr>
                        <td colspan="2" style="text-align: right; font-weight: bold; background-color: #f7f5f0;">ç¸½è¨ˆ (<span id="currency-symbol">Â¥</span>)ï¼š</td>
                        <td id="total-expense" style="text-align: right; font-weight: bold; background-color: #f7f5f0;">0</td>
                        <td></td>
                    </tr>
                </tfoot>
            </table>

            <button onclick="addExpense()" style="margin-top: 20px; padding: 10px 15px; background-color: #bca47c; color: white; border: none; border-radius: 5px; cursor: pointer;">+ æ–°å¢èŠ±è²»ç´€éŒ„</button>
            <div style="margin-top: 15px; font-size: 0.9em; color: #888;">
                * æç¤ºï¼šé»æ“Šè¡¨æ ¼ä¸­çš„ä»»ä¸€æ¬„ä½å³å¯ç›´æ¥ç·¨è¼¯å…§å®¹ã€‚
            </div>
        </div>

    </div>

    <script>
        // ------------------------------------
        // JavaScript for Interactivity
        // ------------------------------------
        
        // åŒ¯ç‡è¨­å®šï¼š1 å°å¹£ (NTD) å…Œæ› X æ—¥åœ“ (Â¥)
        const TWD_TO_JPY_RATE = 4.7; 

        // 1. Tab Switching Logic
        const dayTabs = document.querySelectorAll('.day-tab');
        const itineraryDays = document.querySelectorAll('.itinerary-day');

        dayTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const dayId = tab.getAttribute('data-day');

                // Update active state for tabs
                dayTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                // Update active state for itinerary content
                itineraryDays.forEach(day => {
                    day.classList.remove('active');
                    if (day.id === dayId) {
                        day.classList.add('active');
                    }
                });
            });
        });

        // 2. Inline Editing Logic (for Itinerary)
        document.querySelectorAll('.editable').forEach(element => {
            element.addEventListener('click', function(e) {
                // Prevent editing if clicking on a link
                if (e.target.tagName === 'A') {
                    return;
                }
                
                // Get current text content, including preserving inner <a> tags if present
                let contentText = this.textContent;

                // Create input element
                const input = document.createElement('input');
                input.type = 'text';
                input.className = 'editable-input';
                input.value = contentText.trim(); 
                
                // Replace the editable div with the input field
                this.style.display = 'none';
                this.parentNode.insertBefore(input, this);

                // Focus on the input field
                input.focus();

                // Function to save changes
                const saveChanges = () => {
                    let newValue = input.value.trim();
                    
                    // Note: This implementation simply replaces the text.
                    // If the original contained a link, the link structure (<a> tag) is lost
                    // and needs to be re-added manually by the user if needed.
                    this.innerHTML = newValue; 
                    
                    // Remove the input field and show the div
                    input.parentNode.removeChild(input);
                    this.style.display = 'block';
                };

                // Save changes on blur (loss of focus)
                input.addEventListener('blur', saveChanges);

                // Save changes on Enter key press
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        saveChanges();
                    }
                });
            });
        });

        // 3. Expense Tracking Logic
        
        let expenseCounter = 1; // Start counter
        const expenseTableBody = document.querySelector('#expense-table tbody');
        const totalExpenseFoot = document.getElementById('total-expense');
        const currencySelect = document.getElementById('currency-select');
        const currencySymbolSpan = document.getElementById('currency-symbol');
        const categoryOptions = ['ä½å®¿', 'æ™¯é»', 'é¤å»³', 'è³¼ç‰©', 'äº¤é€š', 'å…¶ä»–'];


        function getInitialExpenses() {
             // Hardcoded initial data for demonstration
            return [
                { id: 'E1', category: 'äº¤é€š', description: 'æ©Ÿç¥¨ (é›™äºº)', amount: 38000 },
                { id: 'E2', category: 'äº¤é€š', description: 'ç§Ÿè»Š (6å¤©)', amount: 45000 },
                { id: 'E3', category: 'ä½å®¿', description: 'S-Peria Hotel Hakata (1æ™š)', amount: 15000 },
                { id: 'E4', category: 'ä½å®¿', description: 'èŠ±ä¹‹æ¹¯æ—…é¤¨ Oyado Hananoyu (1æ™š)', amount: 35000 },
                { id: 'E5', category: 'ä½å®¿', description: 'è—¤ã®ãƒ´ã‚£ãƒ© Fujino Villa (1æ™š)', amount: 28000 },
                { id: 'E6', category: 'ä½å®¿', description: 'Hotel Takachiho (1æ™š)', amount: 18000 },
                { id: 'E7', category: 'ä½å®¿', description: 'Quintessa Hotel Fukuoka (1æ™š)', amount: 16000 },
                { id: 'E8', category: 'æ™¯é»', description: 'ä¹å·é‡ç”Ÿå‹•ç‰©åœ’é–€ç¥¨', amount: 5000 },
            ];
        }

        // Load expenses from local storage (if any)
        function loadExpenses() {
            let expenses = JSON.parse(localStorage.getItem('travelchiahaho_expenses'));
            
            // If nothing is in localStorage, use initial data
            if (!expenses || expenses.length === 0) {
                expenses = getInitialExpenses();
            }

            expenseTableBody.innerHTML = '';
            
            expenses.forEach(item => {
                appendExpenseRow(item.category, item.description, item.amount, item.id);
                // Keep the counter updated
                if (parseInt(item.id.substring(1)) >= expenseCounter) {
                    expenseCounter = parseInt(item.id.substring(1)) + 1;
                }
            });
            updateTotal();
            makeExpensesEditable();
        }

        // Save expenses to local storage
        function saveExpenses() {
            const rows = expenseTableBody.querySelectorAll('tr');
            const expenses = [];
            rows.forEach(row => {
                const id = row.getAttribute('data-id');
                const category = row.querySelector('.category-select').value;
                const description = row.cells[1].textContent.trim();
                // We use the raw amount stored in the data attribute, or from the cell content if no data attr.
                let amount = parseFloat(row.cells[2].textContent.replace(/[Â¥,]/g, '')) || 0;

                expenses.push({ id, category, description, amount });
            });
            localStorage.setItem('travelchiahaho_expenses', JSON.stringify(expenses));
        }

        // Add a new expense row
        function appendExpenseRow(category = 'å…¶ä»–', description = '', amount = 0, id = 'E' + expenseCounter++) {
            const newRow = expenseTableBody.insertRow();
            newRow.setAttribute('data-id', id);

            // Cell 1: Category (Select)
            const categoryCell = newRow.insertCell(0);
            categoryCell.innerHTML = createCategorySelect(category);

            // Cell 2: Description (Editable Text)
            const descCell = newRow.insertCell(1);
            descCell.textContent = description;
            descCell.classList.add('expense-editable');

            // Cell 3: Amount (Editable Number, right-aligned)
            const amountCell = newRow.insertCell(2);
            amountCell.textContent = formatJPY(amount);
            amountCell.style.textAlign = 'right';
            amountCell.classList.add('expense-editable');
            amountCell.setAttribute('data-amount', amount); // Store original JPY amount

            // Cell 4: Delete Button
            const deleteCell = newRow.insertCell(3);
            deleteCell.innerHTML = '<button class="delete-btn" onclick="deleteExpense(this)">X</button>';

            // Re-apply event listeners
            makeExpensesEditable();
            updateTotal();
            saveExpenses(); // Save immediately after adding
        }

        window.addExpense = function() {
            appendExpenseRow();
        }

        window.deleteExpense = function(button) {
            if (confirm('ç¢ºå®šè¦åˆªé™¤é€™ç­†èŠ±è²»ç´€éŒ„å—ï¼Ÿ')) {
                const row = button.closest('tr');
                row.remove();
                saveExpenses();
                updateTotal();
            }
        }
        
        function createCategorySelect(selectedCategory) {
            let selectHTML = '<select class="category-select" onchange="saveExpenses()">';
            categoryOptions.forEach(option => {
                const selected = option === selectedCategory ? 'selected' : '';
                selectHTML += `<option value="${option}" ${selected}>${option}</option>`;
            });
            selectHTML += '</select>';
            return selectHTML;
        }

        // Helper to format JPY with comma separators
        function formatJPY(amount) {
            return Math.round(amount).toLocaleString('ja-JP');
        }
        
        // Update the total expense based on current rows and selected currency
        window.updateTotal = function() {
            let totalJPY = 0;
            const rows = expenseTableBody.querySelectorAll('tr');
            
            rows.forEach(row => {
                // Read the base JPY amount from the data attribute (for consistency)
                const amount = parseFloat(row.cells[2].getAttribute('data-amount')) || 0;
                totalJPY += amount;
            });
            
            const selectedCurrency = currencySelect.value;
            let displayAmount;
            let symbol;

            if (selectedCurrency === 'JPY') {
                displayAmount = totalJPY;
                symbol = 'Â¥';
            } else { // TWD
                displayAmount = totalJPY / TWD_TO_JPY_RATE;
                symbol = 'NTD';
            }

            totalExpenseFoot.textContent = Math.round(displayAmount).toLocaleString('zh-TW');
            currencySymbolSpan.textContent = symbol;
        }

        // Expense table inline editing function
        function makeExpensesEditable() {
            document.querySelectorAll('#expense-table .expense-editable').forEach(cell => {
                // Ensure event listener is only added once
                if (cell.getAttribute('data-listener') === 'true') {
                    return;
                }
                cell.setAttribute('data-listener', 'true');

                cell.addEventListener('click', function() {
                    let originalValue = this.textContent.trim();
                    let inputType = 'text';

                    // Use 'number' input type for the amount cell
                    if (this === this.closest('tr').cells[2]) {
                        inputType = 'number';
                        // Remove commas and currency symbols for input
                        originalValue = this.getAttribute('data-amount') || originalValue.replace(/[Â¥,]/g, '');
                    }

                    const input = document.createElement('input');
                    input.type = inputType;
                    input.value = originalValue;
                    input.className = 'editable-input';
                    input.style.width = '90%'; // Make input fit within the cell
                    
                    this.textContent = '';
                    this.appendChild(input);
                    input.focus();

                    const saveExpenseChanges = () => {
                        let newValue = input.value.trim();
                        
                        if (inputType === 'number') {
                            let amount = parseFloat(newValue) || 0;
                            // Update the cell display to formatted JPY
                            this.textContent = formatJPY(amount);
                            // Store the raw JPY amount in a data attribute
                            this.setAttribute('data-amount', amount);
                        } else {
                            this.textContent = newValue;
                        }
                        
                        // Clean up
                        input.removeEventListener('blur', saveExpenseChanges);
                        input.removeEventListener('keypress', handleKeyPress);
                        input.parentNode.removeChild(input);
                        
                        saveExpenses(); // Save the updated data
                        updateTotal(); // Recalculate total
                    };
                    
                    const handleKeyPress = (e) => {
                        if (e.key === 'Enter') {
                            input.blur(); // Trigger blur to save changes
                        }
                    };

                    input.addEventListener('blur', saveExpenseChanges);
                    input.addEventListener('keypress', handleKeyPress);
                });
            });
        }


        // 4. Weather Simulation/Data (Simple hardcoded for demo)
        function updateWeatherBox(dayId, city, temp, conditionIcon, conditionText) {
            const box = document.getElementById(`weather-${dayId}`);
            if (box) {
                box.innerHTML = `
                    ${city} <br>
                    <span class="weather-temp">${temp}Â°C</span>
                    <span class="weather-icon">${conditionIcon}</span>
                    <br>
                    ${conditionText}
                `;
            }
        }
        
        // Simulating Weather Data (Replace with API calls if possible)
        function loadWeather() {
            updateWeatherBox('D1', 'ç¦å²¡', '5/10', 'â˜€ï¸', 'æ™´æ™‚å¤šé›²');
            updateWeatherBox('D2', 'åˆ¥åºœ', '3/8', 'ğŸŒ§ï¸', 'å±€éƒ¨å°é›¨');
            updateWeatherBox('D3', 'é˜¿è˜‡', '-2/4', 'â˜ï¸', 'å¤šé›²å¶é›ª');
            updateWeatherBox('D4', 'é«˜åƒç©—', '0/5', 'â˜€ï¸', 'æ™´æœ—å¯’å†·');
            updateWeatherBox('D5', 'ç¦å²¡', '4/9', 'â›…', 'å¤šé›²è½‰æ™´');
            updateWeatherBox('D6', 'ç¦å²¡', '5/10', 'â˜€ï¸', 'æ™´æœ—');
        }


        // Initialization on Load
        window.onload = function() {
            loadExpenses();
            loadWeather();
            // Ensure initial total is calculated based on JPY (default select value)
            updateTotal(); 
        };
    </script>
</body>
</html>
